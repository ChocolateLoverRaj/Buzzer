<!DOCTYPE html>
<html>
<head>
    <title>Buzzer Host</title>
    <script src="/app.js"></script>
</head>
<body>
    <h1>Buzzer Host</h1>
    <h2>You are currently hosting a game.</h2>
    <h2>Game code for players to join: <span id="code"></span></h2>
    <script>
        const code = document.getElementById("code");
        //Try to get password
        if (localStorage.getItem("password")) {
            //Try to get info
            app.request({ password: localStorage.getItem("password") }, "/api/host", "GET", undefined, undefined, (statusCode, payload) => {
                if (statusCode == 200) {
                    code.innerHTML = payload.id;
                }
            });
        }
        else {
            console.log("You are not hosting a game");
            window.location.replace("/create");
        }
    </script>
</body>
</html>